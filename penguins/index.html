<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Martyrdom of the Great Auk</title>

  <!-- Tufte CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tufte-css/1.8.0/tufte.min.css"/>

  <style>
    /* Layout + tighter spacing */
    .pi-tufte { max-width: 70ch; margin: 0 auto; }
    .pi-tufte .poem { font-size: 0.50rem; line-height: 1.5; }
    .pi-tufte .poem p { margin: 0.15rem 0; }

    /* Per-character animation */
    .char { display: inline-block; will-change: transform; }

    /* Italic helper */
    .pi-ital { font-style: italic; }

    /* Clickable Icelandic lines */
    .is-icelandic { cursor: pointer; text-decoration: underline dotted; }
    .is-icelandic:focus { outline: 2px solid currentColor; outline-offset: 2px; }

    /* Title layout */
    .pi-title { font-size: 2.5rem; margin: 0 0 0.8rem; font-style: normal; }
    .pi-subtitle { font-size: 1.75rem; margin: -0.2rem 0 1.0rem; color: #666; font-style: italic; }
    
    /* Scroll reveal initial state (JS removes these on reveal) */
    .reveal { opacity: 0; transform: translateY(12px); }
  </style>

  <!-- Libraries -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/splitting@1.0.6/dist/splitting.min.js"></script>
  <script async src="https://www.youtube.com/iframe_api"></script>
  
</head>
<body>

<article class="pi-tufte">
  <h2 class="pi-title"><i>Martyrdom of the Great Auk</i></h2><br><br>

  <div class="poem" id="poem">
    <p>
      <span class="reveal">Pinguins are communists!</span><br>

      <span class="reveal">the Great Auk,
        <label for="sn-auk" class="margin-toggle sidenote-number"></label>
        <input type="checkbox" id="sn-auk" class="margin-toggle" />
        <span class="sidenote"><em>Pinguinus impennis</em>, the extinct North Atlantic seabird—the original “pinguin.”</span>
      </span><br>

      <span class="reveal">the OG pinguin—</span><br>
      <span class="reveal">do not confuse</span><br>
      <span class="reveal">with penguin, different</span><br>
      <span class="reveal">bird, ask Bonaparte,</span><br>
      <span class="reveal">or Bromelia plants<br>(see Olof, Swede)—
        <label for="sn-olof" class="margin-toggle sidenote-number"></label>
        <input type="checkbox" id="sn-olof" class="margin-toggle" />
        <span class="sidenote">Olof (the Swede) — the botanist linked to the naming of <em>Bromelia</em>.</span>
      </span><br>

      <span class="reveal">a true comrade
        <label for="sn-peng" class="margin-toggle sidenote-number"></label>
        <input type="checkbox" id="sn-peng" class="margin-toggle" />
        <span class="sidenote">like PENG-gwin, /ˈpɛŋɡwɪn/<br>probably from the Welsh<br><strong>pen</strong> + <strong>gwyn</strong> = white-head</span>
      </span><br><br>

      <span class="reveal">collected by Europeans</span><br>
      <span class="reveal">trophies in cabinets</span><br>
      <span class="reveal">hunted to death</span><br>
      <span class="reveal">by false Americans</span><br>
      <span class="reveal">plucked bare naked</span><br>
      <span class="reveal">like fat chickens</span><br>
      <span class="reveal">flogged for crimes</span><br>
      <span class="reveal">they never committed</span><br>
      <span class="reveal">burnt on stakes</span><br>
      <span class="reveal">screaming for help</span><br>
      <span class="reveal">flesh ripped apart</span><br>
      <span class="reveal">by white teeth</span><br><br>

      <span class="reveal">males incubate eggs</span><br>
      <span class="reveal">while females forage</span><br>
      <span class="reveal">always switching roles</span><br>
      <span class="reveal">communal clusters cover</span><br>
      <span class="reveal">resources equally shared</span><br>
      <span class="reveal">food, care, nesting</span><br>
      <span class="reveal">huddling for warmth</span><br>
      <span class="reveal">from glacial winds</span><br>
      <span class="reveal">maximising all survival</span><br><br>

      <span class="reveal">until Iceland’s sons</span><br><br>

      <!-- Icelandic lines: add .is-icelandic and a11y -->
      <span class="reveal pi-ital is-icelandic" role="button" tabindex="0" aria-label="Play Icelandic narration">ég tók hann<br>
      í hálsinn og<br>
      hann blakti vængjunum<br>
      hann grét ekki<br>
      ég kyrkti hann</span><br><br>

      <span class="reveal">3. júní 1844</span><br><br>

      <span class="reveal">the Great Auk</span><br>
      <span class="reveal">martyr of Marx</span><br>
      <span class="reveal">before its time</span><br><br>

      <span class="reveal">Pinguins are communists!</span>
      <span class="reveal">Penguins are communists!</span>
      <span class="reveal">Rejoice, for the penguins<br>are true communists!</span>
    </p>
  </div>
</article>

<!-- Single audio source (replace src with your MP3 path) -->
<audio id="icelandic-voice" src="./Kratos_Icelandic_Lines.mp3" preload="auto"></audio>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const hasGSAP = typeof gsap !== 'undefined';

  const revealEls = Array.from(document.querySelectorAll('.reveal'));
  if (!reduce && 'IntersectionObserver' in window && hasGSAP) {
    const io = new IntersectionObserver((entries) => {
      entries.forEach(({target, isIntersecting}) => {
        if (isIntersecting) {
          io.unobserve(target);
          gsap.to(target, {opacity: 1, y: 0, duration: 0.6, ease: 'power1.out'});
        }
      });
    }, {root: null, rootMargin: '0px 0px -10% 0px', threshold: 0.1});
    revealEls.forEach(el => io.observe(el));
  } else {
    revealEls.forEach(el => { el.style.opacity = 1; el.style.transform = 'none'; });
  }

  /* ---- Audio: play narration when any Icelandic line is clicked or focused + Enter/Space ---- */
  const audio = document.getElementById('icelandic-voice');
  const iceLines = document.querySelectorAll('.is-icelandic');

  function playIcelandic() {
    try {
      audio.currentTime = 0;
      const p = audio.play();
      if (p && typeof p.catch === 'function') p.catch(()=>{ /* ignore blocked autoplay */ });
    } catch(e) { /* no-op */ }
  }

  iceLines.forEach(el => {
    el.addEventListener('click', playIcelandic);
    el.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        playIcelandic();
      }
    });
  });
});
</script>

<p style="margin:0.5rem 0 1rem"><a href="../">← back to poems</a></p>
</body>
</html>
